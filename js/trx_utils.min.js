function trx_utils_form_validate(e,s){"use strict";var r="";if(e.find(":input").each(function(){if(""==r||!s.exit_after_first_error)for(var e=0;e<s.rules.length;e++)if(jQuery(this).attr("name")==s.rules[e].field){var _=jQuery(this).val(),t=!1;if("object"==typeof s.rules[e].min_length&&s.rules[e].min_length.value>0&&_.length<s.rules[e].min_length.value&&(""==r&&jQuery(this).get(0).focus(),r+='<p class="error_item">'+("undefined"!=typeof s.rules[e].min_length.message?s.rules[e].min_length.message:s.error_message_text)+"</p>",t=!0),t&&s.exit_after_first_error||"object"!=typeof s.rules[e].max_length||s.rules[e].max_length.value>0&&_.length>s.rules[e].max_length.value&&(""==r&&jQuery(this).get(0).focus(),r+='<p class="error_item">'+("undefined"!=typeof s.rules[e].max_length.message?s.rules[e].max_length.message:s.error_message_text)+"</p>",t=!0),!(t&&s.exit_after_first_error||"object"!=typeof s.rules[e].mask)&&_.length>0&&""!=s.rules[e].mask.value){var a=new RegExp(s.rules[e].mask.value);a.test(_)||(""==r&&jQuery(this).get(0).focus(),r+='<p class="error_item">'+("undefined"!=typeof s.rules[e].mask.message?s.rules[e].mask.message:s.error_message_text)+"</p>",t=!0)}t&&s.exit_after_first_error||"object"!=typeof s.rules[e].state||"checked"!=s.rules[e].state.value||jQuery(this).get(0).checked||(""==r&&jQuery(this).get(0).focus(),r+='<p class="error_item">'+("undefined"!=typeof s.rules[e].state.message?s.rules[e].state.message:s.error_message_text)+"</p>",t=!0),t&&s.exit_after_first_error||"object"!=typeof s.rules[e].equal_to||""!=s.rules[e].equal_to.value&&_!=jQuery(jQuery(this).get(0).form[s.rules[e].equal_to.value]).val()&&(""==r&&jQuery(this).get(0).focus(),r+='<p class="error_item">'+("undefined"!=typeof s.rules[e].equal_to.message?s.rules[e].equal_to.message:s.error_message_text)+"</p>",t=!0),""!=s.error_fields_class&&jQuery(this).toggleClass(s.error_fields_class,t)}}),""!=r&&s.error_message_show){var _=e.find(".result");0==_.length&&(_=e.parent().find(".result")),0==_.length&&(e.append('<div class="result"></div>'),_=e.find(".result")),s.error_message_class&&_.toggleClass(s.error_message_class,!0),_.html(r).fadeIn(),setTimeout(function(){_.fadeOut()},s.error_message_time)}return""!=r}function trx_utils_comments_validate(e){"use strict";e.find("input").removeClass("error_fields_class");var s={error_message_text:TRX_UTILS_STORAGE.msg_error_global,error_message_show:!0,error_message_time:4e3,error_message_class:"sc_infobox sc_infobox_style_error",error_fields_class:"error_fields_class",exit_after_first_error:!1,rules:[{field:"comment",min_length:{value:1,message:TRX_UTILS_STORAGE.msg_text_empty},max_length:{value:TRX_UTILS_STORAGE.comments_maxlength,message:TRX_UTILS_STORAGE.msg_text_long}}]};e.find('.comments_author input[aria-required="true"]').length>0&&s.rules.push({field:"author",min_length:{value:1,message:TRX_UTILS_STORAGE.msg_name_empty},max_length:{value:60,message:TRX_UTILS_STORAGE.msg_name_long}}),e.find('.comments_email input[aria-required="true"]').length>0&&s.rules.push({field:"email",min_length:{value:7,message:TRX_UTILS_STORAGE.msg_email_empty},max_length:{value:60,message:TRX_UTILS_STORAGE.msg_email_long},mask:{value:TRX_UTILS_STORAGE.email_mask,message:TRX_UTILS_STORAGE.msg_email_not_valid}});var r=trx_utils_form_validate(e,s);return!r}function trx_utils_login_validate(e){"use strict";e.find("input").removeClass("error_fields_class");var s=trx_utils_form_validate(e,{error_message_show:!0,error_message_time:4e3,error_message_class:"sc_infobox sc_infobox_style_error",error_fields_class:"error_fields_class",exit_after_first_error:!0,rules:[{field:"log",min_length:{value:1,message:TRX_UTILS_STORAGE.msg_login_empty},max_length:{value:60,message:TRX_UTILS_STORAGE.msg_login_long}},{field:"pwd",min_length:{value:4,message:TRX_UTILS_STORAGE.msg_password_empty},max_length:{value:30,message:TRX_UTILS_STORAGE.msg_password_long}}]});return TRX_UTILS_STORAGE.login_via_ajax&&!s&&jQuery.post(TRX_UTILS_STORAGE.ajax_url,{action:"trx_utils_login_user",nonce:TRX_UTILS_STORAGE.ajax_nonce,remember:e.find("#rememberme").val(),user_log:e.find("#log").val(),user_pwd:e.find("#password").val()}).done(function(s){var r={};try{r=JSON.parse(s)}catch(_){r={error:TRX_UTILS_STORAGE.ajax_error},console.log(s)}var t=e.find(".result");0==t.length&&(t=e.siblings(".result")),0==t.length&&(t=e.after('<div class="result"></div>').next(".result")),t.toggleClass("sc_infobox_style_error",!1).toggleClass("sc_infobox_style_success",!1),""===r.error?(t.addClass("sc_infobox sc_infobox_style_success").html(TRX_UTILS_STORAGE.msg_login_success),setTimeout(function(){location.reload()},3e3)):t.addClass("sc_infobox sc_infobox_style_error").html(TRX_UTILS_STORAGE.msg_login_failed+"<br>"+r.error),t.fadeIn().delay(3e3).fadeOut()}),!TRX_UTILS_STORAGE.login_via_ajax&&!s}function trx_utils_registration_validate(e){"use strict";e.find("input").removeClass("error_fields_class");var s=trx_utils_form_validate(e,{error_message_show:!0,error_message_time:4e3,error_message_class:"sc_infobox sc_infobox_style_error",error_fields_class:"error_fields_class",exit_after_first_error:!0,rules:[{field:"registration_agree",state:{value:"checked",message:TRX_UTILS_STORAGE.msg_not_agree}},{field:"registration_username",min_length:{value:1,message:TRX_UTILS_STORAGE.msg_login_empty},max_length:{value:60,message:TRX_UTILS_STORAGE.msg_login_long}},{field:"registration_email",min_length:{value:7,message:TRX_UTILS_STORAGE.msg_email_empty},max_length:{value:60,message:TRX_UTILS_STORAGE.msg_email_long},mask:{value:TRX_UTILS_STORAGE.email_mask,message:TRX_UTILS_STORAGE.msg_email_not_valid}},{field:"registration_pwd",min_length:{value:4,message:TRX_UTILS_STORAGE.msg_password_empty},max_length:{value:30,message:TRX_UTILS_STORAGE.msg_password_long}},{field:"registration_pwd2",equal_to:{value:"registration_pwd",message:TRX_UTILS_STORAGE.msg_password_not_equal}}]});return s||jQuery.post(TRX_UTILS_STORAGE.ajax_url,{action:"trx_utils_registration_user",nonce:TRX_UTILS_STORAGE.ajax_nonce,user_name:e.find("#registration_username").val(),user_email:e.find("#registration_email").val(),user_pwd:e.find("#registration_pwd").val()}).done(function(s){var r={};try{r=JSON.parse(s)}catch(_){r={error:TRX_UTILS_STORAGE.ajax_error},console.log(s)}var t=e.find(".result");0==t.length&&(t=e.siblings(".result")),0==t.length&&(t=e.after('<div class="result"></div>').next(".result")),t.toggleClass("sc_infobox_style_error",!1).toggleClass("sc_infobox_style_success",!1),""===r.error?(t.addClass("sc_infobox sc_infobox_style_success").html(TRX_UTILS_STORAGE.msg_registration_success),setTimeout(function(){jQuery(".popup_login_link").trigger("click")},3e3)):t.addClass("sc_infobox sc_infobox_style_error").html(TRX_UTILS_STORAGE.msg_registration_failed+" "+r.error),t.fadeIn().delay(3e3).fadeOut()}),!1}if("undefined"==typeof TRX_UTILS_STORAGE)var TRX_UTILS_STORAGE={};jQuery(document).ready(function(){"use strict";jQuery(".popup_form.login_form").submit(function(e){var s=trx_utils_login_validate(jQuery(this));return s||e.preventDefault(),s}),jQuery(".popup_form.registration_form").submit(function(e){var s=trx_utils_registration_validate(jQuery(this));return s||e.preventDefault(),s}),jQuery("form#commentform").submit(function(e){var s=trx_utils_comments_validate(jQuery(this));return s||e.preventDefault(),s})});
